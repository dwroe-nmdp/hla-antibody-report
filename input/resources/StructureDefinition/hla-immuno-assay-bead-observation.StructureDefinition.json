{
  "resourceType": "StructureDefinition",
  "url": "https://fhir.nmdp.org/ig/HlaAntibodyReport/StructureDefinition/hla-immunoassay-bead-observation",
  "version": "0.1.0",
  "name": "HLAImmunoassayBeadObservation",
  "title": "HLA Immunoassay Bead Observation",
  "status": "draft",
  "publisher": "NMDP",
  "contact": [
    {
      "name": "David Wroe",
      "telecom": [
        {
          "system": "email",
          "value": "dwroe@nmdp.org",
          "use": "work"
        }
      ]
    }
  ],
  "description": "Extension of US Core lab result observation to capture attributes specific to solid-phase immuno-assay bead test results.\r\n\r\nA single bead within a solid phase panel.\r\nThis bead usually has a specificity, which may be an allele name or a serological specificity.\r\n\r\nThe bead has information about it's corresponding positive and negative controls.\r\n\r\nElements:\r\n----------\r\n            - bead-info: Structure containing details on the specificity and identifiers of an individual bead\r\n            - raw-data: Structure containing measured MFI or raw data as measured in the assay.\r\n            - converted-data: Structure containing converted MFIs, formulas used, and interpretations of bead-specific results.\r\n\r\nbead-info\r\n            - bead-id\r\n            - type\r\n            - control-type\r\n            - HLA-target-type\r\n            - HLA-target-serological-specificity\r\n            - number of beads\r\n            - sample-raw-MFI\r\n            - formula\r\n            - sample-adjusted-MFI\r\n            - bead-interpretation\r\n            - bead-plausible\r\n            - bead-plausible-reason\r\n            - Ref: working-sample-id\r\n            - Ref: negative-control-bead-id\r\n                      - negative-control-serum-raw-MFI\r\n                      - negative-control-serum-adjusted-MFI\r\n                      - Ref: negative-control-serum-id\r\n            - Ref: positive-control-bead-id\r\n                      - positive-control-serum-raw-MFI\r\n                      - positive-control-serum-adjusted-MFI\r\n                      - Ref: positive-control-serum-id",
  "purpose": "Part of HLA Antibody Diagnostic Report implementation guide to capture results specifically for immuno-assay bead results",
  "fhirVersion": "4.0.1",
  "kind": "resource",
  "abstract": false,
  "type": "Observation",
  "baseDefinition": "http://hl7.org/fhir/us/core/StructureDefinition/us-core-observation-lab",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "Observation.identifier",
        "path": "Observation.identifier",
        "min": 1,
        "max": "1"
      },
      {
        "id": "Observation.identifier.value",
        "path": "Observation.identifier.value",
        "label": "Bead Identifier",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Observation.partOf.reference",
        "path": "Observation.partOf.reference",
        "label": "HLA Antibody Diagnostic Report Ref",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Observation.code.coding.system",
        "path": "Observation.code.coding.system",
        "min": 1,
        "binding": {
          "strength": "required",
          "valueSet": "http://fhir.nmdp.org/terminology/HLAImmunoAssay"
        }
      },
      {
        "id": "Observation.focus",
        "path": "Observation.focus",
        "max": "0"
      },
      {
        "id": "Observation.encounter",
        "path": "Observation.encounter",
        "max": "0"
      },
      {
        "id": "Observation.value[x]",
        "path": "Observation.value[x]",
        "label": "Raw MFI",
        "min": 1,
        "type": [
          {
            "code": "integer"
          }
        ]
      },
      {
        "id": "Observation.interpretation",
        "path": "Observation.interpretation",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "$this"
            }
          ],
          "rules": "open"
        },
        "min": 1
      },
      {
        "id": "Observation.interpretation:bead-interpretation-classification-entity",
        "path": "Observation.interpretation",
        "sliceName": "bead-interpretation-classification-entity",
        "short": "Bead result classification entity",
        "definition": "Bead observation interpretation indicating the person or entity performing the interpretation of the bead result.",
        "max": "1"
      },
      {
        "id": "Observation.interpretation:bead-interpretation-classification-entity.coding.system",
        "path": "Observation.interpretation.coding.system",
        "max": "0",
        "mustSupport": false
      },
      {
        "id": "Observation.interpretation:bead-interpretation-classification-entity.coding.code",
        "path": "Observation.interpretation.coding.code",
        "max": "0",
        "mustSupport": false
      },
      {
        "id": "Observation.interpretation:bead-interpretation-classification-entity.text",
        "path": "Observation.interpretation.text",
        "label": "Classification Entity",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Observation.interpretation:bead-interpretation-classification",
        "path": "Observation.interpretation",
        "sliceName": "bead-interpretation-classification",
        "short": "Bead result classification",
        "definition": "Bead observation interpretation indicating the classification of the bead result.",
        "max": "1"
      },
      {
        "id": "Observation.interpretation:bead-interpretation-classification.coding.system",
        "path": "Observation.interpretation.coding.system",
        "min": 1,
        "mustSupport": true,
        "binding": {
          "strength": "extensible",
          "valueSet": "http://fhir.nmdp.org/terminology/fhir/CodeSystem/hla-immunoassay-codes"
        }
      },
      {
        "id": "Observation.interpretation:bead-interpretation-classification.coding.code",
        "path": "Observation.interpretation.coding.code",
        "min": 1,
        "mustSupport": true,
        "binding": {
          "strength": "extensible",
          "valueSet": "http://fhir.nmdp.org/terminology/hla-antibody-assay/bead-interpretation-classification"
        }
      },
      {
        "id": "Observation.interpretation:bead-interpretation-rank",
        "path": "Observation.interpretation",
        "sliceName": "bead-interpretation-rank",
        "short": "Bead result rank",
        "definition": "Bead observation interpretation indicating the rank of the bead result.",
        "max": "1"
      },
      {
        "id": "Observation.interpretation:bead-interpretation-rank.coding.system",
        "path": "Observation.interpretation.coding.system",
        "min": 1,
        "mustSupport": true,
        "binding": {
          "strength": "required",
          "valueSet": "http://fhir.nmdp.org/terminology/fhir/CodeSystem/hla-immunoassay-codes"
        }
      },
      {
        "id": "Observation.interpretation:bead-interpretation-rank.coding.code",
        "path": "Observation.interpretation.coding.code",
        "min": 1,
        "mustSupport": true,
        "binding": {
          "strength": "extensible",
          "valueSet": "http://fhir.nmdp.org/terminology/hla-antibody-assay/bead-interpretation-ranking"
        }
      },
      {
        "id": "Observation.interpretation:bead-plausible",
        "path": "Observation.interpretation",
        "sliceName": "bead-plausible",
        "short": "Bead result plausibility",
        "definition": "Bead observation interpretation indicating the plausibility of the bead result.",
        "comment": "Categorical assessment of a laboratory value.",
        "max": "1"
      },
      {
        "id": "Observation.interpretation:bead-plausible.coding",
        "path": "Observation.interpretation.coding",
        "max": "1"
      },
      {
        "id": "Observation.interpretation:bead-plausible.coding.system",
        "path": "Observation.interpretation.coding.system",
        "min": 1,
        "mustSupport": true,
        "binding": {
          "strength": "extensible",
          "valueSet": "http://fhir.nmdp.org/terminology/fhir/CodeSystem/hla-immunoassay-codes"
        }
      },
      {
        "id": "Observation.interpretation:bead-plausible.coding.code",
        "path": "Observation.interpretation.coding.code",
        "min": 1,
        "mustSupport": true,
        "binding": {
          "strength": "required",
          "valueSet": "http://fhir.nmdp.org/terminology/fhir/ValueSet/hla-immunoassay-boolean"
        }
      },
      {
        "id": "Observation.interpretation:bead-plausible-reason",
        "path": "Observation.interpretation",
        "sliceName": "bead-plausible-reason",
        "short": "Bead result plausibility reason",
        "definition": "Bead observation interpretation indicating the reason code for the plausibility assessment of the bead result.",
        "comment": "Categorical assessment of a laboratory value.",
        "max": "1"
      },
      {
        "id": "Observation.interpretation:bead-plausible-reason.coding.system",
        "path": "Observation.interpretation.coding.system",
        "min": 1,
        "mustSupport": true,
        "binding": {
          "strength": "extensible",
          "valueSet": "http://fhir.nmdp.org/terminology/fhir/CodeSystem/hla-immunoassay-codes"
        }
      },
      {
        "id": "Observation.interpretation:bead-plausible-reason.coding.code",
        "path": "Observation.interpretation.coding.code",
        "min": 1,
        "mustSupport": true,
        "binding": {
          "strength": "extensible",
          "valueSet": "http://fhir.nmdp.org/terminology/fhir/ValueSet/hla-immunoassay-bead-plausible-reason"
        }
      },
      {
        "id": "Observation.bodySite",
        "path": "Observation.bodySite",
        "max": "0"
      },
      {
        "id": "Observation.referenceRange",
        "path": "Observation.referenceRange",
        "max": "0"
      },
      {
        "id": "Observation.component",
        "path": "Observation.component",
        "label": "bead-info",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "$this"
            }
          ],
          "ordered": false,
          "rules": "open"
        },
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Observation.component.code.coding",
        "path": "Observation.component.code.coding",
        "max": "1"
      },
      {
        "id": "Observation.component.code.coding.system",
        "path": "Observation.component.code.coding.system",
        "code": [
          {
            "display": "hla-target-type"
          }
        ]
      },
      {
        "id": "Observation.component.code.text",
        "path": "Observation.component.code.text",
        "min": 1,
        "fixedString": "HLA Immuno-assay Bead Information",
        "mustSupport": true
      },
      {
        "id": "Observation.component:bead-hla-target-type",
        "path": "Observation.component",
        "sliceName": "bead-hla-target-type",
        "min": 1,
        "max": "1",
        "mustSupport": true
      },
      {
        "id": "Observation.component:bead-hla-target-type.code.coding.display",
        "path": "Observation.component.code.coding.display",
        "label": "hla-target-serological-specificity"
      },
      {
        "id": "Observation.component:bead-hla-target-type.code.text",
        "path": "Observation.component.code.text",
        "label": "hla-target-type",
        "min": 1
      },
      {
        "id": "Observation.component:bead-hla-target-type.value[x]",
        "path": "Observation.component.value[x]",
        "min": 1,
        "type": [
          {
            "code": "string"
          }
        ],
        "binding": {
          "strength": "required",
          "valueSet": "http://fhir.nmdp.org/terminology/glstring"
        }
      },
      {
        "id": "Observation.component:bead-hla-target-serological-specificity",
        "path": "Observation.component",
        "sliceName": "bead-hla-target-serological-specificity",
        "label": "hla-target-serological-specificity",
        "min": 1,
        "max": "1",
        "mustSupport": true
      },
      {
        "id": "Observation.component:bead-hla-target-serological-specificity.code.coding.display",
        "path": "Observation.component.code.coding.display",
        "mustSupport": false
      },
      {
        "id": "Observation.component:bead-hla-target-serological-specificity.code.text",
        "path": "Observation.component.code.text",
        "label": "hla-target-serological-specificity",
        "mustSupport": true
      },
      {
        "id": "Observation.component:bead-hla-target-serological-specificity.value[x]",
        "path": "Observation.component.value[x]",
        "min": 1,
        "type": [
          {
            "code": "string"
          }
        ],
        "mustSupport": true,
        "binding": {
          "strength": "required",
          "valueSet": "http://fhir.nmdp.org/terminology/glstring"
        }
      },
      {
        "id": "Observation.component:bead-type",
        "path": "Observation.component",
        "sliceName": "bead-type",
        "min": 1,
        "max": "1",
        "mustSupport": true
      },
      {
        "id": "Observation.component:bead-type.code.coding.system",
        "path": "Observation.component.code.coding.system",
        "min": 1,
        "mustSupport": true,
        "binding": {
          "strength": "extensible",
          "valueSet": "http://fhir.nmdp.org/terminology/fhir/CodeSystem/hla-immunoassay-codes"
        }
      },
      {
        "id": "Observation.component:bead-type.code.coding.code",
        "path": "Observation.component.code.coding.code",
        "min": 1,
        "mustSupport": true,
        "binding": {
          "strength": "extensible",
          "valueSet": "http://fhir.nmdp.org/terminology/fhir/ValueSet/hla-immunoassay-bead-type"
        }
      },
      {
        "id": "Observation.component:bead-type.code.text",
        "path": "Observation.component.code.text",
        "mustSupport": false
      },
      {
        "id": "Observation.component:bead-type.value[x]",
        "path": "Observation.component.value[x]",
        "mustSupport": false
      },
      {
        "id": "Observation.component:bead-count",
        "path": "Observation.component",
        "sliceName": "bead-count",
        "max": "1"
      },
      {
        "id": "Observation.component:bead-count.code.text",
        "path": "Observation.component.code.text",
        "label": "bead-count",
        "min": 1
      },
      {
        "id": "Observation.component:bead-count.value[x]",
        "path": "Observation.component.value[x]",
        "min": 1,
        "type": [
          {
            "code": "integer"
          }
        ]
      },
      {
        "id": "Observation.component:bead-conversion-formula",
        "path": "Observation.component",
        "sliceName": "bead-conversion-formula",
        "max": "1"
      },
      {
        "id": "Observation.component:bead-conversion-formula.code.text",
        "path": "Observation.component.code.text",
        "label": "bead-conversion-formula",
        "min": 1
      },
      {
        "id": "Observation.component:bead-conversion-formula.value[x]",
        "path": "Observation.component.value[x]",
        "min": 1,
        "type": [
          {
            "code": "string"
          }
        ]
      },
      {
        "id": "Observation.component:bead-converted-mfi",
        "path": "Observation.component",
        "sliceName": "bead-converted-mfi",
        "min": 1,
        "max": "1",
        "mustSupport": true
      },
      {
        "id": "Observation.component:bead-converted-mfi.code.text",
        "path": "Observation.component.code.text",
        "label": "bead-converted-mfi",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Observation.component:bead-converted-mfi.value[x]",
        "path": "Observation.component.value[x]",
        "min": 1,
        "type": [
          {
            "code": "integer"
          }
        ],
        "mustSupport": true
      }
    ]
  }
}